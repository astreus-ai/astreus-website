---
title: Agents
---

Agents are the central component of the Astreus framework. An agent represents an AI assistant capable of holding conversations, performing tasks, and using tools to accomplish goals.

## Agent Architecture

Each Astreus agent consists of:

- **Provider**: Connection to the underlying LLM (OpenAI, Ollama, etc.)
- **Memory**: Storage system for conversation history
- **Tools**: Optional capabilities that extend what the agent can do
- **Tasks**: System for breaking complex requests into manageable sub-tasks
- **Database**: Persistent storage for agent state and data

## Creating an Agent

To create an agent, use the `createAgent` function:

```typescript
import { 
  createAgent, 
  createProvider,
  createMemory,
  createDatabase
} from '@astreus-ai/astreus';

(async () => {
  // Initialize the database
  const db = await createDatabase();
  
  // Create memory instance
  const memory = await createMemory({
    database: db,
    tableName: "memories",
    maxEntries: 100
  });

  // Configure your provider
  const provider = createProvider({
    type: 'openai',
    model: 'gpt-4o-mini'
  });

  // Create an agent instance
  const agent = await createAgent({
    name: 'MyAssistant',
    description: 'A helpful AI assistant',
    provider: provider,
    memory: memory,
    database: db,
    systemPrompt: "You are a helpful AI assistant."
  });
})();
```

## Agent Configuration Options

When creating an agent, you can customize its behavior with these options:

| Option | Type | Description | Required |
|--------|------|-------------|----------|
| `name` | string | Name of the agent | No (defaults to "Assistant") |
| `description` | string | Description of the agent | No |
| `provider` | Provider | LLM provider instance | Yes |
| `memory` | Memory | Memory instance for conversation history | Yes |
| `database` | Database | Database for persistence | No (created if not provided) |
| `systemPrompt` | string | Instructions that define agent behavior | No |
| `tools` | Plugin[] | Array of tools/plugins | No |
| `plugins` | PluginInstance[] | Plugin instances with tool functionality | No |
| `rag` | RAG | Retrieval system for documents (automatically creates RAG tools) | No |

## Agent with RAG Capabilities

When you provide a RAG instance to an agent, it automatically gains access to document search and management tools:

```typescript
import { 
  createAgent, 
  createRAG,
  RAGType,
  parsePDF,
  createProvider,
  createMemory,
  createDatabase
} from '@astreus-ai/astreus';

(async () => {
  // Initialize components
  const db = await createDatabase();
  const provider = createProvider({ type: 'openai', model: 'gpt-4o-mini' });
  const memory = await createMemory({ database: db, tableName: "memories" });

  // Parse a PDF document
  const pdfResult = await parsePDF('./manual.pdf', {
    splitStrategy: 'section',
    includePageNumbers: true
  });

  // Create RAG system
  const rag = await createRAG({
    type: RAGType.VECTOR,
    database: db,
    provider: provider,
    chunkSize: 1000,
    chunkOverlap: 200
  });

  // Add parsed document to RAG
  for (const doc of pdfResult.documents) {
    await rag.addDocument({
      content: doc.content,
      metadata: {
        ...doc.metadata,
        documentId: pdfResult.documentId,
        fileName: pdfResult.pdfMetadata.title
      }
    });
  }

  // Create agent with RAG capabilities
  const agent = await createAgent({
    name: 'DocumentAssistant',
    description: 'AI assistant with access to documentation',
    provider: provider,
    memory: memory,
    database: db,
    rag: rag,  // This automatically adds RAG tools!
    systemPrompt: `You are a helpful assistant with access to documentation. 
When users ask questions, search through the available documents to provide accurate answers.
Always cite the source document and page number when possible.`
  });

  // The agent now automatically has these RAG tools available:
  // - rag_search: Search through documents semantically
  // - rag_add_document: Add new documents (Vector RAG only)
  // - rag_get_document: Retrieve specific documents (Vector RAG only)
  // - rag_delete_document: Remove documents (Vector RAG only)
  // - rag_search_by_metadata: Search by metadata (Document RAG only)

  // To use the agent, create a chat manager
  const chatManager = await createChat({
    database: db,
    memory: memory
  });

  // Agent will automatically use RAG when relevant
  const response = await chatManager.createChatWithMessage({
    agentId: agent.id,
    userId: "user-123",
    title: "Documentation Query",
    message: "What does the manual say about installation?",
    provider: provider,
    systemPrompt: agent.systemPrompt,
    tools: agent.getAvailableTools().map(toolName => 
      Array.from(agent.tools.values()).find(tool => tool.name === toolName)
    ).filter(Boolean)
  });
  // Agent searches documents and provides contextual answer
})();
```

### RAG Tool Availability

The tools available to your agent depend on the RAG type:

**Vector RAG** provides:
- `rag_search` - Semantic search across document content
- `rag_add_document` - Add new documents to the knowledge base
- `rag_get_document` - Retrieve specific documents by ID
- `rag_delete_document` - Remove documents from the knowledge base

**Document RAG** provides:
- `rag_search` - Search across document content
- `rag_search_by_metadata` - Filter documents by metadata

### Agent RAG Usage Examples

```typescript
// Create chat manager for conversations
const chatManager = await createChat({
  database: db,
  memory: memory
});

// Agent automatically searches when asked about documentation
const answer1 = await chatManager.createChatWithMessage({
  agentId: agent.id,
  userId: "user-123",
  title: "Database Configuration",
  message: "How do I configure the database connection?",
  provider: provider,
  systemPrompt: agent.systemPrompt,
  tools: agent.getAvailableTools().map(toolName => 
    Array.from(agent.tools.values()).find(tool => tool.name === toolName)
  ).filter(Boolean)
});
// Agent uses rag_search tool automatically

// Agent can add new information to knowledge base
const answer2 = await chatManager.chat({
  chatId: answer1.chatId,
  agentId: agent.id,
  userId: "user-123",
  message: `Add this FAQ to the knowledge base:
  Q: How to reset password?
  A: Click on 'Forgot Password' link and follow email instructions.`,
  provider: provider,
  tools: agent.getAvailableTools().map(toolName => 
    Array.from(agent.tools.values()).find(tool => tool.name === toolName)
  ).filter(Boolean)
});
// Agent uses rag_add_document tool automatically

// Agent can find documents by metadata
const answer3 = await chatManager.chat({
  chatId: answer1.chatId,
  agentId: agent.id,
  userId: "user-123",
  message: "Show me all documents about security from version 2.0",
  provider: provider,
  tools: agent.getAvailableTools().map(toolName => 
    Array.from(agent.tools.values()).find(tool => tool.name === toolName)
  ).filter(Boolean)
});
// Agent uses rag_search_by_metadata with appropriate filters

// Agent understands document relationships
const answer4 = await chatManager.chat({
  chatId: answer1.chatId,
  agentId: agent.id,
  userId: "user-123",
  message: "What does page 15 of the user manual say about networking?",
  provider: provider,
  tools: agent.getAvailableTools().map(toolName => 
    Array.from(agent.tools.values()).find(tool => tool.name === toolName)
  ).filter(Boolean)
});
// Agent searches for content with specific page metadata
```

## Agent Integration with Chat and Task Systems

Agents in Astreus are designed to work seamlessly with the Chat and Task management systems. While agents focus on core functionality like model management and tool integration, conversations and task orchestration are handled by dedicated managers.

### Chat Integration

For conversation management, use the Chat system alongside your agent:

```typescript
import { createAgent, createChat, createMemory, createDatabase, createProvider } from '@astreus-ai/astreus';

// Create agent
const agent = await createAgent({
  name: 'Assistant',
  model: myModel,
  memory: myMemory,
  systemPrompt: "You are a helpful AI assistant."
});

// Create chat manager
const chatManager = await createChat({
  database: myDatabase,
  memory: myMemory
});

// Start a conversation
const response = await chatManager.createChatWithMessage({
  agentId: agent.id,
  userId: "user-123",
  title: "General Chat",
  message: "Hello! How are you?",
  model: agent.config.model,
  systemPrompt: agent.config.systemPrompt,
  tools: agent.getAvailableTools().map(toolName => 
    // Get actual tool objects from agent
    Array.from((agent as any).tools.values()).find((tool: any) => tool.name === toolName)
  ).filter(Boolean)
});

// Continue conversation
const response2 = await chatManager.chat({
  chatId: "existing-chat-id",
  agentId: agent.id,
  message: "What's the weather like?",
  model: agent.config.model,
  tools: Array.from((agent as any).tools.values())
});
```

### Task Integration

For complex task orchestration, use the Task system with your agent:

```typescript
import { createTaskManager } from '@astreus-ai/astreus';

// Create task manager
const taskManager = createTaskManager({
  agentId: agent.id,
  memory: myMemory,
  database: myDatabase
});

// Create and run tasks
await taskManager.createTask({
  name: "Data Analysis",
  description: "Analyze the uploaded dataset",
  input: { datasetPath: "/path/to/data.csv" }
});

const results = await taskManager.run();
```

### Agent as Tool Provider

The primary role of an agent is to provide tools and model access to the Chat and Task systems:

```typescript
// Agent provides tools to chat system
const availableTools = agent.getAvailableTools();
const toolObjects = availableTools.map(toolName => 
  // Access agent's internal tools
  Array.from((agent as any).tools.values()).find((tool: any) => tool.name === toolName)
).filter(Boolean);

// Use in chat
await chatManager.chat({
  chatId: "chat-123",
  agentId: agent.id,
  message: "Calculate 15 * 23",
  model: agent.config.model,
  tools: toolObjects  // Agent's tools are used by chat system
});
```

## Adding Tools at Runtime

You can add new capabilities to an agent after creation:

```typescript
import { CalculatorPlugin } from './plugins/calculator';

// Create a new plugin
const calculator = new CalculatorPlugin();

// Add it to the agent
agent.addTool(calculator);

// Now the agent can use the calculator
const response = await agent.chat("What is 234 * 789?");
``` 